<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ AntiPublic - File Processor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #3670A0;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info: #3498db;
            --dark: #1a1a2e;
            --light: #ecf0f1;
        }

        body {
            background: linear-gradient(135deg, var(--dark) 0%, #16213e 100%);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-success { background: var(--success); }
        .btn-warning { background: var(--warning); }
        .btn-danger { background: var(--danger); }
        .btn-info { background: var(--info); }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--info);
            border-bottom: 2px solid var(--info);
            padding-bottom: 8px;
        }

        .file-upload {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
        }

        .file-upload:hover {
            border-color: var(--info);
            background: rgba(52, 152, 219, 0.1);
        }

        .file-list {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .file-item {
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-size {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-private { color: var(--success); }
        .stat-public { color: var(--warning); }
        .stat-duplicate { color: var(--danger); }
        .stat-total { color: var(--info); }

        .progress-container {
            margin: 15px 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(45deg, var(--success), var(--info));
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .results {
            max-height: 400px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .result-item {
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--info);
        }

        .result-private { border-left-color: var(--success); }
        .result-public { border-left-color: var(--warning); }
        .result-duplicate { border-left-color: var(--danger); }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--info);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .folder-structure {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .folder-item {
            margin: 5px 0;
            padding-right: 20px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
        }

        .notification.success { background: var(--success); }
        .notification.error { background: var(--danger); }
        .notification.warning { background: var(--warning); }
        .notification.info { background: var(--info); }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="title">ğŸš€ AntiPublic - File Processor</h1>
            <p class="subtitle">Ù…Ø¹Ø§Ù„Ø¬ Ù…ØªÙ‚Ø¯Ù… Ù„ÙØ­Øµ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù†ØµÙŠØ© ÙˆØ¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª</p>
            
            <div class="controls">
                <button class="btn btn-success" onclick="startProcessing()">
                    ğŸ”„ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
                </button>
                <button class="btn btn-warning" onclick="pauseProcessing()">
                    â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
                </button>
                <button class="btn btn-danger" onclick="stopProcessing()">
                    â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù
                </button>
                <button class="btn btn-info" onclick="clearAll()">
                    ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
                </button>
                <button class="btn" onclick="downloadResults()">
                    ğŸ’¾ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                </button>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-number stat-private" id="privateCount">0</div>
                <div>âœ… Ø®Ø§ØµØ©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number stat-public" id="publicCount">0</div>
                <div>ğŸ“¢ Ø¹Ø§Ù…Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number stat-duplicate" id="duplicateCount">0</div>
                <div>ğŸ”„ Ù…ÙƒØ±Ø±Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number stat-total" id="totalCount">0</div>
                <div>ğŸ“Š Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
            </div>
        </div>

        <!-- Progress -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            <div style="text-align: center; margin-top: 5px;">
                <span id="progressText">0%</span> | 
                <span id="processedCount">0</span> / <span id="totalItems">0</span> |
                <span id="speedInfo">0 combos/Ø«Ø§Ù†ÙŠØ©</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Input Panel -->
            <div class="panel">
                <h3 class="panel-title">ğŸ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„ÙØ§Øª</h3>
                
                <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                    <div style="font-size: 3rem; margin-bottom: 15px;">ğŸ“</div>
                    <h4>Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù†ØµÙŠØ©</h4>
                    <p>Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§</p>
                    <p style="font-size: 0.9rem; opacity: 0.7;">ÙŠØ¯Ø¹Ù…: .txt (Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª)</p>
                </div>
                
                <input type="file" id="fileInput" accept=".txt" multiple style="display: none;" onchange="handleFileSelect(event)">
                
                <div class="file-list" id="fileList">
                    <div style="text-align: center; padding: 20px; opacity: 0.7;">
                        Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ Ø£ÙŠ Ù…Ù„ÙØ§Øª
                    </div>
                </div>

                <div style="margin-top: 15px;">
                    <button class="btn btn-info" onclick="loadFromStorage()">
                        ğŸ“‚ ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
                    </button>
                    <button class="btn btn-warning" onclick="clearStorage()">
                        ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ†
                    </button>
                </div>
            </div>

            <!-- Results Panel -->
            <div class="panel">
                <h3 class="panel-title">ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª</h3>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„ÙØ§Øª...</p>
                    <p style="opacity: 0.7; font-size: 0.9rem;" id="processingInfo"></p>
                </div>

                <div class="folder-structure">
                    <div style="margin-bottom: 10px; font-weight: bold;">ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª:</div>
                    <div class="folder-item">ğŸ“ combos_archive/</div>
                    <div class="folder-item" style="padding-right: 40px;">ğŸ“„ private_combos.txt (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ©)</div>
                    <div class="folder-item" style="padding-right: 40px;">ğŸ“„ public_combos.txt (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©)</div>
                    <div class="folder-item" style="padding-right: 40px;">ğŸ“„ processed_files.txt (Ø³Ø¬Ù„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©)</div>
                    <div class="folder-item" style="padding-right: 40px;">ğŸ“„ duplicates_log.txt (Ø³Ø¬Ù„ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª)</div>
                </div>
                
                <div class="results" id="resultsContainer">
                    <div style="text-align: center; padding: 40px; opacity: 0.7;">
                        ğŸ“ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        const state = {
            files: [],
            allCombos: new Set(), // Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ combos Ø§Ù„ÙØ±ÙŠØ¯Ø©
            processedCombos: new Set(), // Ø§Ù„Ù€ combos Ø§Ù„ØªÙŠ ØªÙ…Øª Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§ Ù…Ø³Ø¨Ù‚Ø§Ù‹
            results: {
                private: new Set(),
                public: new Set(),
                duplicates: new Set()
            },
            isProcessing: false,
            isPaused: false,
            totalProcessed: 0,
            currentIndex: 0,
            startTime: null
        };

        // Ø¹Ù†Ø§ØµØ± DOM
        const elements = {
            privateCount: document.getElementById('privateCount'),
            publicCount: document.getElementById('publicCount'),
            duplicateCount: document.getElementById('duplicateCount'),
            totalCount: document.getElementById('totalCount'),
            progressBar: document.getElementById('progressBar'),
            progressText: document.getElementById('progressText'),
            processedCount: document.getElementById('processedCount'),
            totalItems: document.getElementById('totalItems'),
            speedInfo: document.getElementById('speedInfo'),
            resultsContainer: document.getElementById('resultsContainer'),
            loading: document.getElementById('loading'),
            processingInfo: document.getElementById('processingInfo'),
            fileInput: document.getElementById('fileInput'),
            fileList: document.getElementById('fileList')
        };

        // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ© Ù„Ù„ÙØ­Øµ
        const checkerDatabase = {
            // Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
            publicDomains: [
                'gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com',
                'aol.com', 'protonmail.com', 'yandex.com', 'mail.com',
                'icloud.com', 'gmx.com', 'live.com', 'msn.com'
            ],

            // ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ø± Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
            commonPasswords: [
                '123456', 'password', '12345678', 'qwerty', '123456789',
                '12345', '1234', '111111', '1234567', 'dragon',
                '123123', 'baseball', 'abc123', 'football', 'monkey',
                'letmein', '696969', 'shadow', 'master', '666666'
            ],

            // ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø¹Ø§Ù…
            isPublicEmail(email) {
                const domain = email.toLowerCase().split('@')[1];
                return this.publicDomains.includes(domain);
            },

            // ÙØ­Øµ Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±
            checkPasswordStrength(password) {
                if (!password || password.length < 6) return 'very_weak';
                
                if (this.commonPasswords.includes(password.toLowerCase())) {
                    return 'breached';
                }

                // ÙØ­Øµ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯
                const hasUpper = /[A-Z]/.test(password);
                const hasLower = /[a-z]/.test(password);
                const hasNumbers = /[0-9]/.test(password);
                const hasSpecial = /[^A-Za-z0-9]/.test(password);

                const complexityScore = [hasUpper, hasLower, hasNumbers, hasSpecial].filter(Boolean).length;

                if (complexityScore >= 3 && password.length >= 8) {
                    return 'strong';
                } else if (complexityScore >= 2 && password.length >= 6) {
                    return 'medium';
                } else {
                    return 'weak';
                }
            },

            // ÙØ­Øµ Combo ÙƒØ§Ù…Ù„
            checkCombo(combo) {
                const [email, password] = combo.split(':').map(s => s.trim());
                
                if (!email || !password || !email.includes('@')) {
                    return 'invalid';
                }

                const isPublicEmail = this.isPublicEmail(email);
                const passwordStrength = this.checkPasswordStrength(password);

                if (passwordStrength === 'breached' || passwordStrength === 'very_weak') {
                    return 'public';
                } else if (isPublicEmail && passwordStrength === 'weak') {
                    return 'public';
                } else if (!isPublicEmail && (passwordStrength === 'strong' || passwordStrength === 'medium')) {
                    return 'private';
                } else if (isPublicEmail && passwordStrength === 'strong') {
                    return 'private';
                } else {
                    return 'public';
                }
            }
        };

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            elements.privateCount.textContent = state.results.private.size;
            elements.publicCount.textContent = state.results.public.size;
            elements.duplicateCount.textContent = state.results.duplicates.size;
            elements.totalCount.textContent = state.allCombos.size;

            // ØªØ­Ø¯ÙŠØ« Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
            if (state.startTime && state.totalProcessed > 0) {
                const elapsedTime = (Date.now() - state.startTime) / 1000;
                const speed = Math.round(state.totalProcessed / elapsedTime);
                elements.speedInfo.textContent = `${speed} combos/Ø«Ø§Ù†ÙŠØ©`;
            }
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„ÙØ§Øª
        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            if (files.length === 0) return;

            files.forEach(file => {
                if (file.type === 'text/plain' || file.name.endsWith('.txt')) {
                    state.files.push({
                        name: file.name,
                        size: file.size,
                        file: file
                    });
                }
            });

            updateFileList();
            showNotification(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${files.length} Ù…Ù„Ù`, 'success');
        }

        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª
        function updateFileList() {
            const fileList = elements.fileList;
            fileList.innerHTML = '';

            if (state.files.length === 0) {
                fileList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ Ø£ÙŠ Ù…Ù„ÙØ§Øª</div>';
                return;
            }

            state.files.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div>
                        <strong>${file.name}</strong>
                        <div class="file-size">${formatFileSize(file.size)}</div>
                    </div>
                    <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem;" onclick="removeFile(${index})">
                        âŒ
                    </button>
                `;
                fileList.appendChild(fileItem);
            });
        }

        // Ø¥Ø²Ø§Ù„Ø© Ù…Ù„Ù Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        function removeFile(index) {
            state.files.splice(index, 1);
            updateFileList();
        }

        // ØªÙ†Ø³ÙŠÙ‚ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        async function startProcessing() {
            if (state.files.length === 0) {
                showNotification('âŒ ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            state.isProcessing = true;
            state.isPaused = false;
            state.startTime = Date.now();
            
            elements.loading.style.display = 'block';
            elements.resultsContainer.innerHTML = '';
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
            loadProcessedData();

            let totalCombos = 0;

            // Ù…Ø¹Ø§Ù„Ø¬Ø© ÙƒÙ„ Ù…Ù„Ù
            for (let fileIndex = 0; fileIndex < state.files.length; fileIndex++) {
                if (!state.isProcessing) break;

                const fileData = state.files[fileIndex];
                const content = await readFileContent(fileData.file);
                const combos = parseCombos(content);

                totalCombos += combos.length;
                elements.totalItems.textContent = totalCombos;

                // Ù…Ø¹Ø§Ù„Ø¬Ø© ÙƒÙ„ combo ÙÙŠ Ø§Ù„Ù…Ù„Ù
                for (let i = 0; i < combos.length; i++) {
                    if (!state.isProcessing) break;
                    
                    while (state.isPaused && state.isProcessing) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }
                    
                    if (!state.isProcessing) break;

                    await processCombo(combos[i], fileData.name);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙƒÙ„ 100 combo
                    if (state.totalProcessed % 100 === 0) {
                        updateProgress();
                        await new Promise(resolve => setTimeout(resolve, 0));
                    }
                }

                // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù… Ø¨Ø¹Ø¯ ÙƒÙ„ Ù…Ù„Ù
                saveProcessedData();
            }

            // Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
            saveResults();
            elements.loading.style.display = 'none';
            state.isProcessing = false;
            
            showNotification('ğŸ‰ Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        }

        // Ù‚Ø±Ø§Ø¡Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù
        function readFileContent(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = e => resolve(e.target.result);
                reader.onerror = reject;
                reader.readAsText(file);
            });
        }

        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù€ Combos Ù…Ù† Ø§Ù„Ù†Øµ
        function parseCombos(content) {
            const lines = content.split('\n');
            const combos = [];
            
            for (let line of lines) {
                line = line.trim();
                if (line && line.includes(':')) {
                    const [email, password] = line.split(':').map(part => part.trim());
                    if (email && password && email.includes('@')) {
                        const combo = `${email}:${password}`;
                        combos.push(combo);
                    }
                }
            }
            
            return combos;
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Combo ÙˆØ§Ø­Ø¯
        async function processCombo(combo, fileName) {
            state.totalProcessed++;
            state.currentIndex++;

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±
            if (state.allCombos.has(combo) {
                state.results.duplicates.add(combo);
                displayResult(combo, 'duplicate', fileName);
                updateStats();
                return;
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† ØªÙ…Øª Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡ Ù…Ø³Ø¨Ù‚Ø§Ù‹
            if (state.processedCombos.has(combo)) {
                state.results.duplicates.add(combo);
                displayResult(combo, 'duplicate', fileName);
                updateStats();
                return;
            }

            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
            state.allCombos.add(combo);
            state.processedCombos.add(combo);

            // ÙØ­Øµ Ø§Ù„Ù†ÙˆØ¹
            const type = checkerDatabase.checkCombo(combo);
            
            if (type === 'private') {
                state.results.private.add(combo);
                displayResult(combo, 'private', fileName);
            } else {
                state.results.public.add(combo);
                displayResult(combo, 'public', fileName);
            }

            updateStats();
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        function updateProgress() {
            const progress = (state.totalProcessed / parseInt(elements.totalItems.textContent)) * 100;
            elements.progressBar.style.width = `${progress}%`;
            elements.progressText.textContent = `${Math.round(progress)}%`;
            elements.processedCount.textContent = state.totalProcessed;
            
            elements.processingInfo.textContent = 
                `ØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© ${state.totalProcessed} combo | ${state.results.private.size} Ø®Ø§ØµØ© | ${state.results.duplicates.size} Ù…ÙƒØ±Ø±Ø©`;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
        function displayResult(combo, type, fileName) {
            const container = elements.resultsContainer;
            
            if (container.children.length === 1 && container.children[0].textContent.includes('Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§')) {
                container.innerHTML = '';
            }
            
            const resultItem = document.createElement('div');
            resultItem.className = `result-item result-${type}`;
            
            const [email, password] = combo.split(':');
            const typeText = {
                private: 'âœ… Ø®Ø§ØµØ©',
                public: 'ğŸ“¢ Ø¹Ø§Ù…Ø©',
                duplicate: 'ğŸ”„ Ù…ÙƒØ±Ø±Ø©'
            };
            
            resultItem.innerHTML = `
                <div style="display: flex; justify-content: between; align-items: start;">
                    <div style="flex: 1;">
                        <strong>${email}</strong>
                        <div style="opacity: 0.7; font-size: 0.9rem;">${password}</div>
                        <div style="font-size: 0.8rem; opacity: 0.6; margin-top: 5px;">Ù…Ù†: ${fileName}</div>
                    </div>
                    <div style="background: ${
                        type === 'private' ? 'var(--success)' : 
                        type === 'public' ? 'var(--warning)' : 'var(--danger)'
                    }; padding: 6px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: bold;">
                        ${typeText[type]}
                    </div>
                </div>
            `;
            
            container.prepend(resultItem);
            
            // Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ù…Ø¹Ù‚ÙˆÙ„ Ù…Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©
            if (container.children.length > 50) {
                container.removeChild(container.lastChild);
            }
        }

        // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
        function pauseProcessing() {
            if (state.isProcessing) {
                state.isPaused = !state.isPaused;
                showNotification(state.isPaused ? 'â¸ï¸ ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª' : 'â–¶ Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', 'warning');
            }
        }

        // Ø¥ÙŠÙ‚Ø§Ù ÙƒØ§Ù…Ù„
        function stopProcessing() {
            state.isProcessing = false;
            state.isPaused = false;
            elements.loading.style.display = 'none';
            showNotification('â¹ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', 'error');
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function saveProcessedData() {
            try {
                const data = {
                    processedCombos: Array.from(state.processedCombos),
                    privateCombos: Array.from(state.results.private),
                    publicCombos: Array.from(state.results.public),
                    allCombos: Array.from(state.allCombos),
                    lastUpdate: new Date().toISOString()
                };
                localStorage.setItem('antipublic_data', JSON.stringify(data));
            } catch (e) {
                console.warn('ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ');
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function loadProcessedData() {
            try {
                const data = localStorage.getItem('antipublic_data');
                if (data) {
                    const parsed = JSON.parse(data);
                    state.processedCombos = new Set(parsed.processedCombos || []);
                    state.results.private = new Set(parsed.privateCombos || []);
                    state.results.public = new Set(parsed.publicCombos || []);
                    state.allCombos = new Set(parsed.allCombos || []);
                    
                    updateStats();
                    showNotification('ğŸ“‚ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©', 'info');
                }
            } catch (e) {
                console.warn('ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ');
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
        function loadFromStorage() {
            loadProcessedData();
        }

        // Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ†
        function clearStorage() {
            localStorage.removeItem('antipublic_data');
            state.processedCombos.clear();
            state.results.private.clear();
            state.results.public.clear();
            state.allCombos.clear();
            updateStats();
            showNotification('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ', 'success');
        }

        // Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
        function saveResults() {
            const results = {
                private: Array.from(state.results.private),
                public: Array.from(state.results.public),
                duplicates: Array.from(state.results.duplicates),
                totalProcessed: state.totalProcessed,
                timestamp: new Date().toISOString()
            };

            // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
            localStorage.setItem('antipublic_results', JSON.stringify(results));
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function downloadResults() {
            if (state.results.private.size === 0 && state.results.public.size === 0) {
                showNotification('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„ØªØ­Ù…ÙŠÙ„', 'error');
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ©
            if (state.results.private.size > 0) {
                const privateContent = Array.from(state.results.private).join('\n');
                downloadFile(privateContent, 'private_combos.txt');
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
            if (state.results.public.size > 0) {
                const publicContent = Array.from(state.results.public).join('\n');
                downloadFile(publicContent, 'public_combos.txt');
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
            if (state.results.duplicates.size > 0) {
                const duplicatesContent = Array.from(state.results.duplicates).join('\n');
                downloadFile(duplicatesContent, 'duplicates_log.txt');
            }

            showNotification('ğŸ’¾ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬', 'success');
        }

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù…ÙŠÙ„
        function downloadFile(content, filename) {
            const blob = new Blob([content], { type: 'text/plain; charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
        function clearAll() {
            state.files = [];
            state.allCombos.clear();
            state.processedCombos.clear();
            state.results.private.clear();
            state.results.public.clear();
            state.results.duplicates.clear();
            state.totalProcessed = 0;
            state.currentIndex = 0;
            
            updateFileList();
            updateStats();
            elements.resultsContainer.innerHTML = 
                '<div style="text-align: center; padding: 40px; opacity: 0.7;">ğŸ“ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</div>';
            
            showNotification('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => notification.style.transform = 'translateX(0)', 100);
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 4000);
        }

        // Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª Ø§Ù„Ù…Ù„ÙØ§Øª
        document.addEventListener('DOMContentLoaded', function() {
            const dropArea = document.querySelector('.file-upload');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            function highlight() {
                dropArea.style.borderColor = 'var(--info)';
                dropArea.style.background = 'rgba(52, 152, 219, 0.2)';
            }
            
            function unhighlight() {
                dropArea.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                dropArea.style.background = '';
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            dropArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleFileSelect({ target: { files } });
            }

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
            loadProcessedData();
        });
    </script>
</body>
</html>
